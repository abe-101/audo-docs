(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{78:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return s})),a.d(t,"metadata",(function(){return o})),a.d(t,"toc",(function(){return i})),a.d(t,"default",(function(){return c}));var n=a(3),b=a(7),l=(a(0),a(88)),s={id:"endpoints",title:"Endpoints"},o={unversionedId:"endpoints",id:"endpoints",isDocsHomePage:!1,title:"Endpoints",description:"POST /upload",source:"@site/docs/endpoints.md",slug:"/endpoints",permalink:"/endpoints",version:"current",sidebar:"sidebar",previous:{title:"Audo AI Docs",permalink:"/"},next:{title:"Processing From S3",permalink:"/processing-from-s3"}},i=[],p={toc:i};function c(e){var t=e.components,a=Object(b.a)(e,["components"]);return Object(l.b)("wrapper",Object(n.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(l.b)("div",{style:{display:"inline"}},Object(l.b)("h2",{style:{display:"inline",paddingRight:10}},"POST /upload "),Object(l.b)("div",{style:{color:"#bbbbbb",display:"inline"}},Object(l.b)("i",null,"https://api.audo.ai/v1/upload"),Object(l.b)("br",null))),Object(l.b)("div",{style:{height:14}}),Object(l.b)("p",null,"Upload an audio file for future processing."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Form data: ",Object(l.b)("inlineCode",{parentName:"li"},"file=@path/to/file.wav")),Object(l.b)("li",{parentName:"ul"},"Optional url params:",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"?inputExt=wav"),": Overrides input extension")))),Object(l.b)("p",null,"Response:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "fileId": "string"\n}\n')),Object(l.b)("details",null,Object(l.b)("summary",{style:{paddingBottom:20}},"Examples"),Object(l.b)("p",null,Object(l.b)("p",null,"Simple example:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},'curl -X POST "https://api.audo.ai/v1/upload" -F "file=@myaudio.wav" -H "x-api-key: $AUDO_API_KEY"\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},'{"fileId":"bb7888d6-94ce-4638-aa90-68891257757f"}\n')),Object(l.b)("p",null,"Now we can use this ",Object(l.b)("inlineCode",{parentName:"p"},"fileId")," in a request to ",Object(l.b)("inlineCode",{parentName:"p"},"/remove-noise"),". See below for how."))),Object(l.b)("div",{style:{display:"inline"}},Object(l.b)("h2",{style:{display:"inline",paddingRight:10}},"POST /remove-noise "),Object(l.b)("div",{style:{color:"#bbbbbb",display:"inline"}},Object(l.b)("i",null,"https://api.audo.ai/v1/remove-noise"),Object(l.b)("br",null))),Object(l.b)("div",{style:{height:14}}),Object(l.b)("p",null,"Submit an input to the API for noise removal."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"JSON body:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "input": "<fileId>" | "<inputUrl>",  // File ID from /upload or URL to download from\n  "outputExtension": "<extension>",  // [Optional] Output file extension (ie. \'mp3\')\n  "output": "<outputUrl>"  // [Optional] Url to perform a PUT request with the output\n}\n')),Object(l.b)("p",null,"Response:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "jobId": "string"\n}\n')),Object(l.b)("details",null,Object(l.b)("summary",{style:{paddingBottom:20}},"Examples"),Object(l.b)("p",null,Object(l.b)("p",null,"Using ",Object(l.b)("inlineCode",{parentName:"p"},"fileId")," from ",Object(l.b)("inlineCode",{parentName:"p"},"/upload"),":"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},'FILE_ID=1b985607-045f-46b4-b8b0-c037592dd10e\ncurl -X POST "https://api.audo.ai/v1/remove-noise" -d \'{"fileId": "\'$FILE_ID\'"}\' -H "x-api-key: $AUDO_API_KEY"\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},'{"jobId": "45d08ed2-84e6-4f1e-a6f3-2ddbf3c7d8a3"}\n')),Object(l.b)("p",null,"Remove noise from a remote video:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},'url=https://dl5.webmfiles.org/big-buck-bunny_trailer.webm\ncurl -X POST "$BACKEND_URL/remove-noise" -d \'{"input": "\'$url\'", "outputExtension": "mp4"}\' -H "x-api-key: $AUDO_API_KEY" -H "x-api-key: $AUDO_API_KEY"\n')),Object(l.b)("p",null,"Remove noise from audio within S3 using presigned URLs (",Object(l.b)("a",{parentName:"p",href:"/processing-from-s3"},"read more here"),"):"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},'input=https://bucket.s3.amazonaws.com/foo.webm?AWSAccessKeyId=ABC&Signature=PxM%3D&Expires=1615338399\n\n# Note: See the full example for details about generating this\n# It needs to be a PUT request with the appropriate content type\noutput=https://bucket.s3.amazonaws.com/audo-enhanced_foo.mp4?AWSAccessKeyId=ABC&Signature=e8O%3D&content-type=video%2Fmp4&Expires=1615340231\ncurl -X POST "https://api.audo.ai/v1/remove-noise" -d \'{"input": "\'$input\'", "output": "\'$output\'"}\' -H "x-api-key: $AUDO_API_KEY"\n')))),Object(l.b)("div",{style:{display:"inline"}},Object(l.b)("h2",{style:{display:"inline",paddingRight:10}},"GET /remove-noise/<jobId>/status "),Object(l.b)("div",{style:{color:"#bbbbbb",display:"inline"}},Object(l.b)("i",null,"https://api.audo.ai/v1/remove-noise/<jobId>/status"),Object(l.b)("br",null))),Object(l.b)("div",{style:{height:14}}),Object(l.b)("p",null,"Retrieve the status of a job. Response possibilities:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{ "state": "downloading" }  // Only if input is from a URL\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{ "state": "queued", "jobsAhead": <number> }\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{ "state": "in_progress", "percent": <number> }\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{ "state": "succeeded", "downloadPath": "<downloadPath>" }\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{ "state": "failed", "reason": "<reason>" }\n')),Object(l.b)("details",null,Object(l.b)("summary",{style:{paddingBottom:10}},"Examples"),Object(l.b)("p",null,Object(l.b)("p",null,"Here is an example:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},'JOB_ID=be1e2138-433d-4278-8a79-698dfbab9168\ncurl -X GET "https://api.audo.ai/v1/remove-noise/$JOB_ID/status" -H "x-api-key: $AUDO_API_KEY"\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "state": "succeeded",\n  "downloadPath": "dl/artifacts/clean/audo_enhanced_d29940ad-feb8-4187-8b31-e5778ef9ad1c.mp3"\n}\n')),Object(l.b)("p",null,"So, now we would be able to download our file by prepending ",Object(l.b)("inlineCode",{parentName:"p"},"https://api.audo.ai/v1/"),":"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"curl -O https://api.audo.ai/v1/dl/artifacts/clean/audo_enhanced_d29940ad-feb8-4187-8b31-e5778ef9ad1c.mp3\n")))),Object(l.b)("div",{style:{display:"inline"}},Object(l.b)("h2",{style:{display:"inline",paddingRight:10}},"WEBSOCKET /wss/remove-noise/<jobId>/status "),Object(l.b)("div",{style:{color:"#bbbbbb",display:"inline"}},Object(l.b)("i",null,"wss://api.audo.ai/v1/wss/remove-noise/<jobId>/status"),Object(l.b)("br",null))),Object(l.b)("div",{style:{height:14}}),Object(l.b)("p",null,"Retrieve the status of a job in realtime without polling. This is a completely optional alternative method to find the status of a job."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Message format: Each message is a json encoded object in the exact same representation as the endpoint above:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{ "state": "downloading" }  // Only if input is from a URL\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{ "state": "queued", "jobsAhead": <number> }\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{ "state": "in_progress", "percent": <number> }\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{ "state": "succeeded", "downloadPath": "<downloadPath>" }\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{ "state": "failed", "reason": "<reason>" }\n')),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Finally, don't forget to include the authentication header when connecting via ",Object(l.b)("inlineCode",{parentName:"li"},"x-api-key: $AUDO_API_KEY"),".")),Object(l.b)("details",null,Object(l.b)("summary",{style:{paddingBottom:10}},"Examples"),Object(l.b)("p",null,Object(l.b)("p",null,"Here is an example that uses ",Object(l.b)("a",{parentName:"p",href:"https://github.com/vi/websocat"},"websocat"),":"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},'JOB_ID=be1e2138-433d-4278-8a79-698dfbab9168\nwebsocat "wss://api.audo.ai/v1/wss/remove-noise/$JOB_ID/status" -H "x-api-key: $AUDO_API_KEY"\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{"state": "queued", "jobsAhead": 0}\n{"state": "in_progress", "percent": 10}\n{"state": "in_progress", "percent": 18}\n{"state": "in_progress", "percent": 20}\n// ...\n{"state": "in_progress", "percent": 95}\n{"state": "in_progress", "percent": 98}\n{"state": "in_progress", "percent": 100}\n{"state": "succeeded", "downloadPath": "dl/artifacts/clean/audo_enhanced_7c9e10b3-96ca-4904-aecf-ce815339c859.wav"}\n')),Object(l.b)("p",null,"So, same as before, we can now download our file by prepending ",Object(l.b)("inlineCode",{parentName:"p"},"https://api.audo.ai/v1/"),":"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"curl -O https://api.audo.ai/v1/dl/artifacts/clean/audo_enhanced_7c9e10b3-96ca-4904-aecf-ce815339c859.wav\n")))))}c.isMDXComponent=!0}}]);